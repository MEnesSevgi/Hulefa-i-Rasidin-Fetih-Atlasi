<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Hulefa-i Raşidin Fetih Atlası</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />
    <style>
        :root { 
            --ebubekir-color: #0d47a1; 
            --omer-color: #b71c1c; 
            --osman-color: #2e7d32; 
            --paper-light: #f4f1ea; 
            --deep-brown: #4e342e; 
        }

        * { box-sizing: border-box; }

        body { 
            margin: 0; 
            display: flex; 
            height: 100vh; 
            font-family: 'Georgia', serif; 
            background: var(--paper-light); 
            overflow: hidden; /* Masaüstünde taşmayı önler */
        }

        /* Responsive Layout için Ana Yapı */
        #main-wrapper {
            display: flex;
            width: 100%;
            height: 100%;
            flex-direction: row;
        }

        #map { 
            flex: 1; 
            height: 100%; 
          
            z-index: 1;
        }

        #info-panel { 
            width: 420px; 
            background: #fff; 
            display: flex; 
            flex-direction: column; 
            box-shadow: -5px 0 20px rgba(0,0,0,0.2); 
            z-index: 1000;
            border-left: 2px solid var(--deep-brown);
            transition: all 0.3s ease;
        }

        /* --- MOBİL UYUMLULUK (Responsive) --- */
        @media (max-width: 850px) {
            body { 
                overflow-y: auto; /* Mobilde aşağı kaydırmaya izin ver */
                height: auto; 
            }
            #main-wrapper { 
                flex-direction: column; /* Üst üste diz */
                height: auto;
            }
            #map { 
                height: 50vh; /* Harita ekranın yarısını kaplasın */
                width: 100%; 
                flex: none;
            }
            #info-panel { 
                width: 100%; 
                height: auto; 
                border-left: none; 
                border-top: 4px solid var(--deep-brown);
            }
            #wiki-content {
                max-height: 500px; /* İçeriğin çok uzayıp haritayı kaybetmemesi için */
            }
        }

        .header { background: var(--deep-brown); color: #d4af37; padding: 15px; text-align: center; border-bottom: 4px solid #d4af37; }
        .header h1 { margin: 0; font-size: 14px; letter-spacing: 1px; text-transform: uppercase; }

        .control-area { padding: 15px; background: #f9f9f9; border-bottom: 1px solid #ddd; }
        .filter-group { margin-top: 10px; display: flex; flex-direction: column; gap: 8px; }
        .filter-item { display: flex; align-items: center; cursor: pointer; font-size: 13px; font-weight: bold; }
        .filter-item input { margin-right: 10px; width: 18px; height: 18px; cursor: pointer; }

        select { 
            width: 100%; padding: 10px; border-radius: 4px; border: 2px solid var(--deep-brown);
            font-size: 14px; outline: none; background: white; cursor: pointer;
        }

        #wiki-content { padding: 25px; overflow-y: auto; flex: 1; background: #ffffff; }
        #wiki-title { margin-top: 0; color: #333; font-size: 22px; border-bottom: 2px solid #d4af37; padding-bottom: 10px; }
        
        .era-badge { 
            display: inline-block; color: white; padding: 5px 12px; 
            border-radius: 4px; font-size: 10px; margin-bottom: 12px; font-weight: bold;
            text-transform: uppercase;
        }

        #wiki-text { text-align: justify; color: #222; line-height: 1.6; font-size: 15px; }

        .number-icon {
            border: 2px solid white; border-radius: 50%;
            color: white; font-weight: bold; text-align: center; 
            line-height: 26px; font-size: 12px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.5);
        }
        .marker-ebubekir { background: var(--ebubekir-color); }
        .marker-omer { background: var(--omer-color); }
        .marker-osman { background: var(--osman-color); }

        #wiki-footer { padding: 15px; border-top: 1px solid #eee; background: #f9f9f9; display: none; }
        .wiki-btn {
            display: block; width: 100%; padding: 12px; background: var(--deep-brown);
            color: #d4af37; text-decoration: none; text-align: center; border-radius: 4px;
            font-weight: bold; transition: 0.3s; border: 1px solid #d4af37;
        }
    </style>
</head>
<body>

<div id="main-wrapper">
    <div id="map"></div>

    <div id="info-panel">
        <div class="header">
            <h1>HULEFA-İ RAŞİDİN FETİH ATLASI</h1>
        </div>
        
        <div class="control-area">
            <select id="eventSelect">
                <option value="">Fetih Kronolojisini Seçin</option>
            </select>
            
            <div class="filter-group">
                <label class="filter-item">
                    <input type="checkbox" class="era-filter" value="Hz. Ebubekir Dönemi" checked> 
                    <span style="color: var(--ebubekir-color);">Hz. Ebubekir Dönemi</span>
                </label>
                <label class="filter-item">
                    <input type="checkbox" class="era-filter" value="Hz. Ömer Dönemi" checked> 
                    <span style="color: var(--omer-color);">Hz. Ömer Dönemi</span>
                </label>
                <label class="filter-item">
                    <input type="checkbox" class="era-filter" value="Hz. Osman Dönemi" checked> 
                    <span style="color: var(--osman-color);">Hz. Osman Dönemi</span>
                </label>
            </div>
        </div>

        <div id="wiki-content">
            <div id="era-badge" class="era-badge" style="background:#333">Dönem Seçilmedi</div>
            <h2 id="wiki-title">Fetih Atlası</h2>
            <div id="wiki-text">
                Haritadan bir nokta seçin veya filtreleri kullanarak dönemleri inceleyin.
                <br><br>
                <strong>Önemli Dönüm Noktaları:</strong>
                <ul>
                    <li><strong>Hz. Ebubekir(632 – 634):</strong> Hire'nin fethi.</li>
                    <li><strong>Hz. Ömer(634 – 644):</strong> Kadisiye ve Nihavend ile Sasani çöküşü.</li>
                    <li><strong>Hz. Osman(644 – 656):</strong> Zatüs Savari ile denizlerde hakimiyet.</li>
                </ul>
            </div>
        </div>
        
        <div id="wiki-footer">
            <a id="wiki-link" href="#" target="_blank" class="wiki-btn">Wikipedia'da Detaylı Bilgi</a>
        </div>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
<script>
    // Fetih verilerini buraya kendi listenle ekleyebilirsin. Örnek:
    const fetihler = [
             
 // --- HZ. EBUBEKİR DÖNEMİ (1 - 14) ---
{ order: 1, name: "Übülle", era: "Hz. Ebubekir Dönemi", date: "633", lat: 30.4333, lng: 47.9333, color: "marker-ebubekir", desc: "Irak seferinin başlangıç noktası.", wikiUrl: "" },
{ order: 2, name: "Hübeyre", era: "Hz. Ebubekir Dönemi", date: "633", lat: 29.3697, lng: 47.9783, color: "marker-ebubekir", desc: "Zatü's-Selasil zaferi.", wikiUrl: "" },
{ order: 3, name: "Mezar", era: "Hz. Ebubekir Dönemi", date: "633", lat: 31.02, lng: 47.43, color: "marker-ebubekir", desc: "Sasani kuvvetlerine karşı kazanılan meydan savaşı.", wikiUrl: "" },
{ order: 4, name: "Velece", era: "Hz. Ebubekir Dönemi", date: "633", lat: 30.5, lng: 47.0, color: "marker-ebubekir", desc: "Kıskaç taktiği ile kazanılan zafer.", wikiUrl: "" },
{ order: 5, name: "Nehru'l Mürre", era: "Hz. Ebubekir Dönemi", date: "633", lat: 31.05, lng: 46.0, color: "marker-ebubekir", desc: "Fırat nehrinin stratejik geçiş noktası.", wikiUrl: "" },
{ order: 6, name: "Ülleys", era: "Hz. Ebubekir Dönemi", date: "633", lat: 31.3, lng: 45.3, color: "marker-ebubekir", desc: "Çok kanlı geçen kritik bir muharebe.", wikiUrl: "" },
{ order: 7, name: "Emğişiya", era: "Hz. Ebubekir Dönemi", date: "633", lat: 31.4, lng: 45.0, color: "marker-ebubekir", desc: "Sasani ikmal merkezinin tahribi.", wikiUrl: "" },
{ order: 8, name: "Hire", era: "Hz. Ebubekir Dönemi", date: "633", lat: 31.883333, lng: 44.45, color: "marker-ebubekir", desc: "Lahami Krallığı'nın başkenti.", wikiUrl: "https://tr.wikipedia.org/wiki/H%C3%AEre_Muharebesi" },
{ order: 9, name: "Barusma (Banıkya)", era: "Hz. Ebubekir Dönemi", date: "633", lat: 32.32, lng: 44.4, color: "marker-ebubekir", desc: "Fırat kıyısı savunma hattı.", wikiUrl: "" },
{ order: 10, name: "Enbar", era: "Hz. Ebubekir Dönemi", date: "633", lat: 33.35, lng: 43.78, color: "marker-ebubekir", desc: "Zatü'l-Uyun (Gözler Savaşı).", wikiUrl: "https://tr.wikipedia.org/wiki/Enb%C3%A2r_Muharebesi" },
{ order: 11, name: "Aynü't-Temr", era: "Hz. Ebubekir Dönemi", date: "633", lat: 32.5667, lng: 43.4833, color: "marker-ebubekir", desc: "Çölün içindeki kritik kale.", wikiUrl: "" },
{ order: 12, name: "Merc-i Rahit", era: "Hz. Ebubekir Dönemi", date: "634", lat: 33.6, lng: 36.45, color: "marker-ebubekir", desc: "Suriye baskını ve Gassanilerin yenilgisi.", wikiUrl: "" },
{ order: 13, name: "Busra", era: "Hz. Ebubekir Dönemi", date: "634", lat: 32.5197, lng: 36.4817, color: "marker-ebubekir", desc: "Bizans'a bağlı ilk büyük şehrin teslimi.", wikiUrl: "https://tr.wikipedia.org/wiki/Busra_Muharebesi" },
{ order: 14, name: "Ecnadeyn", era: "Hz. Ebubekir Dönemi", date: "634", lat: 31.6833, lng: 34.95, color: "marker-ebubekir", desc: "Filistin'deki ilk büyük meydan savaşı.", wikiUrl: "https://tr.wikipedia.org/wiki/Ecnadeyn_Muharebesi" },

// --- HZ. ÖMER DÖNEMİ (15 - 99) ---
{ order: 1, name: "Nemarık", era: "Hz. Ömer Dönemi", date: "634", lat: 32.0, lng: 44.5, color: "marker-omer", desc: "Irak'ta kazanılan ilk zaferlerden.", wikiUrl: "" },
{ order: 2, name: "Kesker", era: "Hz. Ömer Dönemi", date: "634", lat: 32.2, lng: 45.1, color: "marker-omer", desc: "Dicle kıyısındaki harekat.", wikiUrl: "" },
{ order: 3, name: "Fihl", era: "Hz. Ömer Dönemi", date: "635", lat: 32.45, lng: 35.61, color: "marker-omer", desc: "Pella zaferi.", wikiUrl: "https://tr.wikipedia.org/wiki/Fahl_Muharebesi" },
{ order: 4, name: "Beysan", era: "Hz. Ömer Dönemi", date: "635", lat: 32.49, lng: 35.5, color: "marker-omer", desc: "Ürdün vadisi fethi.", wikiUrl: "" },
{ order: 5, name: "Susiye", era: "Hz. Ömer Dönemi", date: "635", lat: 32.75, lng: 35.65, color: "marker-omer", desc: "Taberiye gölü doğusu.", wikiUrl: "" },
{ order: 6, name: "Efik", era: "Hz. Ömer Dönemi", date: "635", lat: 32.77, lng: 35.7, color: "marker-omer", desc: "Stratejik mevki.", wikiUrl: "" },
{ order: 7, name: "Cereş", era: "Hz. Ömer Dönemi", date: "635", lat: 32.27, lng: 35.89, color: "marker-omer", desc: "Antik Gerasa şehri.", wikiUrl: "" },
{ order: 8, name: "Beytü'r-Res", era: "Hz. Ömer Dönemi", date: "635", lat: 32.58, lng: 35.86, color: "marker-omer", desc: "Ürdün'ün kuzeyi.", wikiUrl: "" },
{ order: 9, name: "Kades", era: "Hz. Ömer Dönemi", date: "635", lat: 33.1, lng: 35.55, color: "marker-omer", desc: "Sınır kasabası.", wikiUrl: "" },
{ order: 10, name: "Sevadü'l-Ürdün", era: "Hz. Ömer Dönemi", date: "635", lat: 32.5, lng: 35.7, color: "marker-omer", desc: "Ürdün kırsalı.", wikiUrl: "" },
{ order: 11, name: "Dımaşk", era: "Hz. Ömer Dönemi", date: "635", lat: 33.51, lng: 36.29, color: "marker-omer", desc: "Şam'ın fethi.", wikiUrl: "" },
{ order: 12, name: "Merc er-Rum", era: "Hz. Ömer Dönemi", date: "635", lat: 33.3, lng: 36.1, color: "marker-omer", desc: "Bizans'a karşı Şam civarı zaferi.", wikiUrl: "" },
{ order: 13, name: "Büveyb", era: "Hz. Ömer Dönemi", date: "635", lat: 32.1, lng: 44.6, color: "marker-omer", desc: "Köprü Savaşı sonrası kazanılan moral zaferi.", wikiUrl: "" },
{ order: 14, name: "Yermük", era: "Hz. Ömer Dönemi", date: "636", lat: 32.81, lng: 35.95, color: "marker-omer", desc: "Bizans'ın sonunu getiren büyük zafer.", wikiUrl: "https://tr.wikipedia.org/wiki/Yerm%C3%BCk_Muharebesi" },
{ order: 15, name: "Kadisiye", era: "Hz. Ömer Dönemi", date: "636", lat: 31.5833, lng: 44.4833, color: "marker-omer", desc: "Sasanilerin bel kemiğini kıran zafer.", wikiUrl: "https://tr.wikipedia.org/wiki/Kadisiye_Muharebesi" },

{ order: 16, name: "Hıms", era: "Hz. Ömer Dönemi", date: "636", lat: 34.73, lng: 36.71, color: "marker-omer", desc: "Emesa şehrinin fethi.", wikiUrl: "" },
{ order: 17, name: "Hama", era: "Hz. Ömer Dönemi", date: "636", lat: 35.13, lng: 36.75, color: "marker-omer", desc: "Asi nehri kıyısındaki fetih.", wikiUrl: "" },
{ order: 18, name: "Lazkiye", era: "Hz. Ömer Dönemi", date: "636", lat: 35.53, lng: 35.78, color: "marker-omer", desc: "Önemli liman kenti.", wikiUrl: "" },
{ order: 19, name: "Medain", era: "Hz. Ömer Dönemi", date: "637", lat: 33.09, lng: 44.58, color: "marker-omer", desc: "Sasani başkentinin düşüşü.", wikiUrl: "https://tr.wikipedia.org/wiki/Tizpon" },
{ order: 20, name: "Celula", era: "Hz. Ömer Dönemi", date: "637", lat: 34.28, lng: 45.16, color: "marker-omer", desc: "İran platosuna giden yol açıldı.", wikiUrl: "" },
{ order: 21, name: "Kınnesrin", era: "Hz. Ömer Dönemi", date: "637", lat: 35.99, lng: 36.99, color: "marker-omer", desc: "Kuzey Suriye savunması.", wikiUrl: "" },
{ order: 22, name: "Haleb", era: "Hz. Ömer Dönemi", date: "637", lat: 36.2, lng: 37.13, color: "marker-omer", desc: "Kuzeyin büyük kalesi.", wikiUrl: "" },
{ order: 23, name: "Antakya", era: "Hz. Ömer Dönemi", date: "637", lat: 36.2, lng: 36.16, color: "marker-omer", desc: "Bizans Doğu Genel Valiliği merkezi.", wikiUrl: "" },
{ order: 24, name: "Ürdün Sahilleri", era: "Hz. Ömer Dönemi", date: "637", lat: 32.5, lng: 34.9, color: "marker-omer", desc: "Kıyı şeridinin kontrolü.", wikiUrl: "" },
{ order: 25, name: "Sebatiye", era: "Hz. Ömer Dönemi", date: "637", lat: 32.27, lng: 35.19, color: "marker-omer", desc: "Filistin içleri.", wikiUrl: "" },
{ order: 26, name: "Nablus", era: "Hz. Ömer Dönemi", date: "637", lat: 32.22, lng: 35.26, color: "marker-omer", desc: "Samiriye bölgesi.", wikiUrl: "" },
{ order: 27, name: "Lüdd", era: "Hz. Ömer Dönemi", date: "637", lat: 31.95, lng: 34.89, color: "marker-omer", desc: "Lydda şehri.", wikiUrl: "" },
{ order: 28, name: "Yübna", era: "Hz. Ömer Dönemi", date: "637", lat: 31.86, lng: 34.74, color: "marker-omer", desc: "Sahil ovası.", wikiUrl: "" },
{ order: 29, name: "Kudüs", era: "Hz. Ömer Dönemi", date: "638", lat: 31.76, lng: 35.21, color: "marker-omer", desc: "Beytü'l-Makdis'in teslimi.", wikiUrl: "" },
{ order: 30, name: "Ehvaz", era: "Hz. Ömer Dönemi", date: "638", lat: 31.32, lng: 48.67, color: "marker-omer", desc: "Huzistan fethi başlangıcı.", wikiUrl: "" },
{ order: 31, name: "Ramuhürmüz", era: "Hz. Ömer Dönemi", date: "638", lat: 31.27, lng: 49.6, color: "marker-omer", desc: "Huzistan içleri.", wikiUrl: "" },
{ order: 32, name: "Amevas", era: "Hz. Ömer Dönemi", date: "639", lat: 31.84, lng: 34.99, color: "marker-omer", desc: "Veba salgını ile meşhur olan yer.", wikiUrl: "" },
{ order: 33, name: "Beyt-i Cibrin", era: "Hz. Ömer Dönemi", date: "639", lat: 31.6, lng: 34.89, color: "marker-omer", desc: "Hebron yolu üzerindeki kale.", wikiUrl: "" },
{ order: 34, name: "Rakka", era: "Hz. Ömer Dönemi", date: "639", lat: 35.95, lng: 39.01, color: "marker-omer", desc: "Cezire harekatı.", wikiUrl: "" },
{ order: 35, name: "Ruha (Urfa)", era: "Hz. Ömer Dönemi", date: "639", lat: 37.16, lng: 38.79, color: "marker-omer", desc: "Edessa'nın fethi.", wikiUrl: "" },
{ order: 36, name: "Harran", era: "Hz. Ömer Dönemi", date: "639", lat: 36.86, lng: 39.02, color: "marker-omer", desc: "Kadim bilim merkezi.", wikiUrl: "" },
{ order: 37, name: "Karkısiye", era: "Hz. Ömer Dönemi", date: "639", lat: 35.15, lng: 40.43, color: "marker-omer", desc: "Fırat ve Habur birleşim noktası.", wikiUrl: "" },
{ order: 38, name: "Amid (Diyarbakır)", era: "Hz. Ömer Dönemi", date: "639", lat: 37.91, lng: 40.23, color: "marker-omer", desc: "Bölgenin merkezi kalesi.", wikiUrl: "" },
{ order: 39, name: "Mardin", era: "Hz. Ömer Dönemi", date: "639", lat: 37.31, lng: 40.73, color: "marker-omer", desc: "Dağlık Mezopotamya.", wikiUrl: "" },
{ order: 40, name: "Tüster", era: "Hz. Ömer Dönemi", date: "640", lat: 32.04, lng: 48.85, color: "marker-omer", desc: "Şiddetli kuşatma ve teslimiyet.", wikiUrl: "" },
{ order: 41, name: "Sus", era: "Hz. Ömer Dönemi", date: "640", lat: 32.19, lng: 48.24, color: "marker-omer", desc: "Kadim Susa şehrinin fethi.", wikiUrl: "" },
{ order: 42, name: "Cündişapur", era: "Hz. Ömer Dönemi", date: "640", lat: 32.28, lng: 48.51, color: "marker-omer", desc: "Meşhur tıp merkezinin fethi.", wikiUrl: "" },
{ order: 43, name: "Kayseriye", era: "Hz. Ömer Dönemi", date: "640", lat: 32.5, lng: 34.89, color: "marker-omer", desc: "Sahilin en güçlü kalesi.", wikiUrl: "" },
{ order: 44, name: "Nusaybin", era: "Hz. Ömer Dönemi", date: "640", lat: 37.07, lng: 41.21, color: "marker-omer", desc: "Sınır şehri.", wikiUrl: "" },
{ order: 45, name: "Sincar", era: "Hz. Ömer Dönemi", date: "640", lat: 36.32, lng: 41.86, color: "marker-omer", desc: "Mezopotamya düzlüğü.", wikiUrl: "" },
{ order: 46, name: "Meyyafarikin", era: "Hz. Ömer Dönemi", date: "640", lat: 38.15, lng: 41.0, color: "marker-omer", desc: "Silvan bölgesi.", wikiUrl: "" },
{ order: 47, name: "Sümeysat", era: "Hz. Ömer Dönemi", date: "640", lat: 37.55, lng: 38.5, color: "marker-omer", desc: "Samosata fethi.", wikiUrl: "" },
{ order: 48, name: "Suruç", era: "Hz. Ömer Dönemi", date: "640", lat: 36.97, lng: 38.42, color: "marker-omer", desc: "Urfa hattı.", wikiUrl: "" },
{ order: 49, name: "Re'sülayn", era: "Hz. Ömer Dönemi", date: "640", lat: 36.85, lng: 40.07, color: "marker-omer", desc: "Cezire pınarları.", wikiUrl: "" },
{ order: 50, name: "Ariş", era: "Hz. Ömer Dönemi", date: "640", lat: 31.13, lng: 33.8, color: "marker-omer", desc: "Mısır'a giriş kapısı.", wikiUrl: "" },
{ order: 51, name: "Ferma", era: "Hz. Ömer Dönemi", date: "640", lat: 31.05, lng: 32.55, color: "marker-omer", desc: "Pelusium fethi.", wikiUrl: "" },
{ order: 52, name: "Bülleys", era: "Hz. Ömer Dönemi", date: "640", lat: 30.41, lng: 31.56, color: "marker-omer", desc: "Mısır içlerine doğru ilerleyiş.", wikiUrl: "" },
{ order: 53, name: "Ümmü Düneyn", era: "Hz. Ömer Dönemi", date: "640", lat: 30.05, lng: 31.25, color: "marker-omer", desc: "Babilon kalesi önleri.", wikiUrl: "" },
{ order: 54, name: "Dara", era: "Hz. Ömer Dönemi", date: "641", lat: 37.17, lng: 40.94, color: "marker-omer", desc: "Meşhur garnizon kenti.", wikiUrl: "" },
{ order: 55, name: "Erzen", era: "Hz. Ömer Dönemi", date: "641", lat: 38.1, lng: 41.5, color: "marker-omer", desc: "Yukarı Dicle hattı.", wikiUrl: "" },
{ order: 56, name: "Babilon", era: "Hz. Ömer Dönemi", date: "641", lat: 30.0, lng: 31.23, color: "marker-omer", desc: "Kıpti ve Bizans savunma merkezi.", wikiUrl: "" },
{ order: 57, name: "Nihavend", era: "Hz. Ömer Dönemi", date: "642", lat: 34.18, lng: 48.37, color: "marker-omer", desc: "Fetihlerin Fethi (Fethu'l-Fütuh).", wikiUrl: "" },
{ order: 58, name: "Hemedan", era: "Hz. Ömer Dönemi", date: "642", lat: 34.79, lng: 48.51, color: "marker-omer", desc: "İran'ın kalbi.", wikiUrl: "" },
{ order: 59, name: "Isfahan", era: "Hz. Ömer Dönemi", date: "642", lat: 32.65, lng: 51.66, color: "marker-omer", desc: "Merkezi İran'ın fethi.", wikiUrl: "" },
{ order: 60, name: "İskenderiye", era: "Hz. Ömer Dönemi", date: "642", lat: 31.2, lng: 29.91, color: "marker-omer", desc: "Mısır'ın anahtarı.", wikiUrl: "" },
{ order: 61, name: "Berka", era: "Hz. Ömer Dönemi", date: "642", lat: 32.5, lng: 21.5, color: "marker-omer", desc: "Libya sınırları.", wikiUrl: "" },
{ order: 62, name: "Kazvin", era: "Hz. Ömer Dönemi", date: "643", lat: 36.26, lng: 50.0, color: "marker-omer", desc: "Deylem sınırındaki şehir.", wikiUrl: "" },
{ order: 63, name: "Zencan", era: "Hz. Ömer Dönemi", date: "643", lat: 36.67, lng: 48.48, color: "marker-omer", desc: "Kuzeybatı İran hattı.", wikiUrl: "" },
{ order: 64, name: "Rey", era: "Hz. Ömer Dönemi", date: "643", lat: 35.59, lng: 51.44, color: "marker-omer", desc: "Tahran yakınlarındaki antik kent.", wikiUrl: "" },
{ order: 65, name: "Kumis", era: "Hz. Ömer Dönemi", date: "643", lat: 36.1, lng: 54.3, color: "marker-omer", desc: "Damgan çevresi.", wikiUrl: "" },
{ order: 66, name: "Cürcan", era: "Hz. Ömer Dönemi", date: "643", lat: 37.22, lng: 55.16, color: "marker-omer", desc: "Hazar denizi kıyıları.", wikiUrl: "" },
{ order: 67, name: "Taberistan", era: "Hz. Ömer Dönemi", date: "643", lat: 36.5, lng: 53.0, color: "marker-omer", desc: "Dağlık direnç bölgesi.", wikiUrl: "" },
{ order: 68, name: "Azerbaycan", era: "Hz. Ömer Dönemi", date: "643", lat: 38.0, lng: 46.0, color: "marker-omer", desc: "Kuzey sınırları.", wikiUrl: "" },
{ order: 69, name: "Babu'l-Ebvab (Derbent)", era: "Hz. Ömer Dönemi", date: "643", lat: 42.06, lng: 48.29, color: "marker-omer", desc: "Hazar kapılarına varış ve sınırın belirlenmesi.", wikiUrl: "" },
{ order: 70, name: "Mukan", era: "Hz. Ömer Dönemi", date: "643", lat: 39.38, lng: 48.47, color: "marker-omer", desc: "Mugan ovası.", wikiUrl: "" },
{ order: 71, name: "Sürt", era: "Hz. Ömer Dönemi", date: "643", lat: 31.2, lng: 16.58, color: "marker-omer", desc: "Sirte bölgesi.", wikiUrl: "" },
{ order: 72, name: "Lebde", era: "Hz. Ömer Dönemi", date: "643", lat: 32.65, lng: 14.28, color: "marker-omer", desc: "Antik Leptis Magna.", wikiUrl: "" },
{ order: 73, name: "Trablusgarb (Tripoli)", era: "Hz. Ömer Dönemi", date: "643", lat: 32.88, lng: 13.19, color: "marker-omer", desc: "Kuzey Afrika'da ulaşılan stratejik liman ve bölge merkezi.", wikiUrl: "" },
{ order: 74, name: "Horasan", era: "Hz. Ömer Dönemi", date: "644", lat: 36.0, lng: 60.0, color: "marker-omer", desc: "İran'ın doğu sınırı.", wikiUrl: "" },
{ order: 75, name: "Erdeşir", era: "Hz. Ömer Dönemi", date: "644", lat: 29.8, lng: 52.5, color: "marker-omer", desc: "Fars bölgesi.", wikiUrl: "" },
{ order: 76, name: "Sabur", era: "Hz. Ömer Dönemi", date: "644", lat: 29.7, lng: 51.5, color: "marker-omer", desc: "Bişapur şehri çevresi.", wikiUrl: "" },
{ order: 77, name: "Istahr", era: "Hz. Ömer Dönemi", date: "644", lat: 29.98, lng: 52.89, color: "marker-omer", desc: "Persepolis yakınlarındaki dini merkez.", wikiUrl: "" },
{ order: 78, name: "Fesa", era: "Hz. Ömer Dönemi", date: "644", lat: 28.93, lng: 53.64, color: "marker-omer", desc: "Güney İran.", wikiUrl: "" },
{ order: 79, name: "Darabcird", era: "Hz. Ömer Dönemi", date: "644", lat: 28.75, lng: 54.54, color: "marker-omer", desc: "Fars'ın güney sınırları.", wikiUrl: "" },
{ order: 80, name: "Kirman", era: "Hz. Ömer Dönemi", date: "644", lat: 30.28, lng: 57.07, color: "marker-omer", desc: "Doğu İran çölleri.", wikiUrl: "" },
{ order: 81, name: "Sicistan", era: "Hz. Ömer Dönemi", date: "644", lat: 31.0, lng: 62.0, color: "marker-omer", desc: "Sistan bölgesi girişi.", wikiUrl: "" },
{ order: 82, name: "Mukran (Makran)", era: "Hz. Ömer Dönemi", date: "644", lat: 25.12, lng: 62.32, color: "marker-omer", desc: "İslam ordularının Hindistan sınırına ulaştığı en uç nokta ve stratejik sahil bölgesi.", wikiUrl: "" },
{ order: 83, name: "Herat", era: "Hz. Ömer Dönemi", date: "644", lat: 34.34, lng: 62.2, color: "marker-omer", desc: "Afganistan kapısı.", wikiUrl: "" },
{ order: 84, name: "Belh", era: "Hz. Ömer Dönemi", date: "644", lat: 36.75, lng: 67.11, color: "marker-omer", desc: "Türkistan sınırındaki kadim kent.", wikiUrl: "" },
{ order: 85, name: "Tevvac", era: "Hz. Ömer Dönemi", date: "644", lat: 29.3, lng: 51.1, color: "marker-omer", desc: "Körfez kıyısında askeri üs.", wikiUrl: "" },

// --- HZ. OSMAN DÖNEMİ (100 - 142) ---
{ order: 1, name: "Sirhan", era: "Hz. Osman Dönemi", date: "647", lat: 33.9, lng: 56.48, color: "marker-osman", desc: "Horasan harekatı başlangıcı.", wikiUrl: "" },
{ order: 2, name: "Tabesan", era: "Hz. Osman Dönemi", date: "647", lat: 33.6, lng: 56.6, color: "marker-osman", desc: "Kuhistan bölgesindeki Tabes kalesi.", wikiUrl: "" },
{ order: 3, name: "Antakya", era: "Hz. Osman Dönemi", date: "647", lat: 36.21, lng: 36.15, color: "marker-osman", desc: "Sınır tahkimi ve bölge güvenliğinin pekiştirilmesi.", wikiUrl: "" },
{ order: 4, name: "Tarsus", era: "Hz. Osman Dönemi", date: "647", lat: 36.91, lng: 34.89, color: "marker-osman", desc: "Kilikya kapılarının fethi.", wikiUrl: "" },
{ order: 5, name: "Malatya Önleri", era: "Hz. Osman Dönemi", date: "647", lat: 38.35, lng: 38.31, color: "marker-osman", desc: "Anadolu içlerine stratejik akınlar.", wikiUrl: "" },

{ order: 6, name: "Subeytula", era: "Hz. Osman Dönemi", date: "647", lat: 35.23, lng: 9.12, color: "marker-osman", desc: "Tunus'ta Bizans valisi Gregorius'a karşı kazanılan büyük zafer.", wikiUrl: "" },
{ order: 7, name: "Rüstak-Zam", era: "Hz. Osman Dönemi", date: "648", lat: 34.9, lng: 60.1, color: "marker-osman", desc: "Horasan içlerindeki ilerleyiş.", wikiUrl: "" },
{ order: 8, name: "Baharz", era: "Hz. Osman Dönemi", date: "648", lat: 34.8, lng: 60.3, color: "marker-osman", desc: "Kuhistan bölgesinin fethi.", wikiUrl: "" },
{ order: 9, name: "Kafsa", era: "Hz. Osman Dönemi", date: "648", lat: 34.41, lng: 8.78, color: "marker-osman", desc: "Tunus'un güneyindeki stratejik vaha şehri.", wikiUrl: "" },
{ order: 10, name: "Cüveyn", era: "Hz. Osman Dönemi", date: "649", lat: 36.65, lng: 56.65, color: "marker-osman", desc: "Kuzey Horasan yolları.", wikiUrl: "" },
{ order: 11, name: "Beyhak", era: "Hz. Osman Dönemi", date: "649", lat: 36.21, lng: 57.68, color: "marker-osman", desc: "Sebzevar çevresinin kontrolü.", wikiUrl: "" },
{ order: 12, name: "Kıbrıs", era: "Hz. Osman Dönemi", date: "649", lat: 35.12, lng: 33.42, color: "marker-osman", desc: "İslam tarihinin ilk deniz fethi.", wikiUrl: "" },
{ order: 13, name: "Bust", era: "Hz. Osman Dönemi", date: "650", lat: 31.55, lng: 64.36, color: "marker-osman", desc: "Sicistan sınır harekatı.", wikiUrl: "" },
{ order: 14, name: "Havaf", era: "Hz. Osman Dönemi", date: "650", lat: 34.57, lng: 60.14, color: "marker-osman", desc: "Horasan bölgesindeki fetihlerin devamı.", wikiUrl: "" },
{ order: 15, name: "Esferayin", era: "Hz. Osman Dönemi", date: "650", lat: 37.06, lng: 57.51, color: "marker-osman", desc: "Kuzey sınır hatlarının güvenliği.", wikiUrl: "" },
{ order: 16, name: "Ergiyan", era: "Hz. Osman Dönemi", date: "650", lat: 37.15, lng: 57.8, color: "marker-osman", desc: "Nişabur yolundaki bölgesel fetih.", wikiUrl: "" },
{ order: 17, name: "Nisabur", era: "Hz. Osman Dönemi", date: "651", lat: 36.21, lng: 58.79, color: "marker-osman", desc: "Horasan'ın ilim ve ticaret merkezi.", wikiUrl: "" },
{ order: 18, name: "Nesa", era: "Hz. Osman Dönemi", date: "651", lat: 37.96, lng: 58.19, color: "marker-osman", desc: "Merv istikametindeki ilerleyiş.", wikiUrl: "" },
{ order: 19, name: "Abiyurd (Abiverd)", era: "Hz. Osman Dönemi", date: "651", lat: 37.56, lng: 59.53, color: "marker-osman", desc: "Horasan'ın kuzey eşiği.", wikiUrl: "" },
{ order: 20, name: "Serahs", era: "Hz. Osman Dönemi", date: "651", lat: 36.54, lng: 61.15, color: "marker-osman", desc: "İpek yolu üzerindeki kritik düğüm noktası.", wikiUrl: "" },
{ order: 21, name: "Tus", era: "Hz. Osman Dönemi", date: "651", lat: 36.48, lng: 59.56, color: "marker-osman", desc: "Meşhed yakınlarındaki büyük İran şehri.", wikiUrl: "" },
{ order: 22, name: "Herat", era: "Hz. Osman Dönemi", date: "651", lat: 34.34, lng: 62.2, color: "marker-osman", desc: "Afganistan kapısı; şehrin tam hakimiyeti.", wikiUrl: "" },
{ order: 23, name: "Merv", era: "Hz. Osman Dönemi", date: "651", lat: 37.66, lng: 62.16, color: "marker-osman", desc: "Sasani İmparatorluğu'nun son direnç noktası.", wikiUrl: "" },
{ order: 24, name: "Secavend", era: "Hz. Osman Dönemi", date: "651", lat: 33.98, lng: 68.9, color: "marker-osman", desc: "Sicistan ve Logar bölgesi.", wikiUrl: "" },
{ order: 25, name: "Merv er-Ruz", era: "Hz. Osman Dönemi", date: "652", lat: 35.93, lng: 63.03, color: "marker-osman", desc: "Yukarı Merv bölgesi.", wikiUrl: "" },
{ order: 26, name: "Cürcan", era: "Hz. Osman Dönemi", date: "652", lat: 37.22, lng: 55.16, color: "marker-osman", desc: "Hazar Denizi'nin güneydoğu kıyıları.", wikiUrl: "" },
{ order: 27, name: "Talkan", era: "Hz. Osman Dönemi", date: "652", lat: 36.73, lng: 69.53, color: "marker-osman", desc: "Toharistan'daki stratejik kale.", wikiUrl: "" },
{ order: 28, name: "Firyab", era: "Hz. Osman Dönemi", date: "652", lat: 36.42, lng: 64.9, color: "marker-osman", desc: "Ceyhun nehri istikameti.", wikiUrl: "" },
{ order: 29, name: "Belh", era: "Hz. Osman Dönemi", date: "652", lat: 36.75, lng: 67.11, color: "marker-osman", desc: "Orta Asya'nın giriş kapısı.", wikiUrl: "" },
{ order: 30, name: "Ruşt", era: "Hz. Osman Dönemi", date: "652", lat: 33.5, lng: 63.5, color: "marker-osman", desc: "Afganistan'ın dağlık bölgeleri.", wikiUrl: "" },
{ order: 31, name: "Şervaz", era: "Hz. Osman Dönemi", date: "652", lat: 33.4, lng: 63.8, color: "marker-osman", desc: "Bölgesel hakimiyetin pekiştirilmesi.", wikiUrl: "" },
{ order: 32, name: "Mukan (Mugan)", era: "Hz. Osman Dönemi", date: "652", lat: 39.3, lng: 48.5, color: "marker-osman", desc: "Azerbaycan'ın kuzey sahil boyu.", wikiUrl: "" },
{ order: 33, name: "Beber (Babr)", era: "Hz. Osman Dönemi", date: "652", lat: 39.1, lng: 48.2, color: "marker-osman", desc: "Hazar kıyı şeridi.", wikiUrl: "" },
{ order: 34, name: "Taylasan", era: "Hz. Osman Dönemi", date: "652", lat: 37.5, lng: 49.0, color: "marker-osman", desc: "Hazar'ın güneyindeki dağlık bölge.", wikiUrl: "" },
{ order: 35, name: "Tamis", era: "Hz. Osman Dönemi", date: "652", lat: 36.77, lng: 54.08, color: "marker-osman", desc: "Taberistan sınır şehri.", wikiUrl: "" },
{ order: 36, name: "Namiye", era: "Hz. Osman Dönemi", date: "652", lat: 36.8, lng: 54.2, color: "marker-osman", desc: "Hazar kıyısındaki yerleşim.", wikiUrl: "" },
{ order: 37, name: "Rodos", era: "Hz. Osman Dönemi", date: "652", lat: 36.43, lng: 28.22, color: "marker-osman", desc: "Ege Denizi'ndeki stratejik ada fethi.", wikiUrl: "" },
{ order: 38, name: "Belencer Muharebesi", era: "Hz. Osman Dönemi", date: "652", lat: 42.8, lng: 47.0, color: "marker-osman", desc: "Hazarlara karşı düzenlenen büyük sefer ve Abdurrahman b. Rebia'nın şehadeti.", wikiUrl: "" },
{ order: 39, name: "Serenc", era: "Hz. Osman Dönemi", date: "653", lat: 31.17, lng: 61.88, color: "marker-osman", desc: "Zaranj şehri; Sicistan'ın merkezi.", wikiUrl: "" },
{ order: 40, name: "Kabil", era: "Hz. Osman Dönemi", date: "653", lat: 34.53, lng: 69.17, color: "marker-osman", desc: "Hindistan yolundaki büyük merkez.", wikiUrl: "" },
{ order: 41, name: "Gazne", era: "Hz. Osman Dönemi", date: "653", lat: 33.54, lng: 68.42, color: "marker-osman", desc: "Güney Afganistan'ın fethi.", wikiUrl: "" },
{ order: 42, name: "Zatü's-Savari", era: "Hz. Osman Dönemi", date: "655", lat: 33.5, lng: 31.0, color: "marker-osman", desc: "Bizans donanmasının Akdeniz'de ağır yenilgiye uğratıldığı deniz savaşı.", wikiUrl: "" }
        ];

   const map = L.map('map', { preferCanvas: true }).setView([32.0, 45.0], 4);
   // Ekran genişliğini kontrol et
const isMobile = window.innerWidth <= 850;

// Mobilde hızlı (CartoDB), Masaüstünde detaylı (OpenStreetMap) altlık kullan
const altlikUrl = isMobile 
    ? 'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png' 
    : 'https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png';

L.tileLayer(altlikUrl).addTo(map);

    const select = document.getElementById('eventSelect');
    const wikiTitle = document.getElementById('wiki-title');
    const wikiText = document.getElementById('wiki-text');
    const eraBadge = document.getElementById('era-badge');
    const wikiFooter = document.getElementById('wiki-footer');
    const wikiLink = document.getElementById('wiki-link');
    
    let activeMarkers = [];
const clusters = L.markerClusterGroup(); 
map.addLayer(clusters); 

function renderMarkers() {
    clusters.clearLayers();
    // Eskiden kalan markerları haritadan temizle (Masaüstü için gerekli)
    activeMarkers.forEach(m => map.removeLayer(m));
    activeMarkers = [];
    
    const selectedEras = Array.from(document.querySelectorAll('.era-filter:checked')).map(cb => cb.value);
    const isMobile = window.innerWidth <= 850;

    fetihler.forEach(f => {
        if (selectedEras.includes(f.era)) {
            const icon = L.divIcon({
                className: 'custom-icon',
                html: `<div class='number-icon ${f.color}'>${f.order}</div>`,
                iconSize: [30, 30]
            });

            const marker = L.marker([f.lat, f.lng], {icon: icon});
            marker.on('click', () => updateInfo(f));
            
            if (isMobile) {
                // MOBİLDE: Kümeye ekle (Kasmayı önler)
                clusters.addLayer(marker);
            } else {
                // MASAÜSTÜNDE: Doğrudan haritaya ekle (Hepsini tek tek gör)
                marker.addTo(map);
            }
            activeMarkers.push(marker);
        }
    });
}

    function updateInfo(f) {
        wikiTitle.innerText = f.name;
        wikiText.innerHTML = `<strong>Tarih:</strong> ${f.date}<br><strong>Dönem:</strong> ${f.era}<br><br>${f.desc}`;
        eraBadge.innerText = f.era;
        
        if (f.wikiUrl && f.wikiUrl.trim() !== "") {
            wikiFooter.style.display = "block";
            wikiLink.href = f.wikiUrl;
        } else {
            wikiFooter.style.display = "none";
        }
        
        const colors = { 
            "Hz. Ebubekir Dönemi": "var(--ebubekir-color)", 
            "Hz. Ömer Dönemi": "var(--omer-color)", 
            "Hz. Osman Dönemi": "var(--osman-color)" 
        };
        eraBadge.style.background = colors[f.era] || "#333";
        map.flyTo([f.lat, f.lng], 10);

        // Mobilde bir noktaya tıklandığında bilgi paneline kaydır
        if (window.innerWidth <= 850) {
            document.getElementById('info-panel').scrollIntoView({ behavior: 'smooth' });
        }
    }

    fetihler.forEach(f => {
        const opt = document.createElement('option');
        opt.value = `${f.order}|${f.era}`;
        opt.textContent = `${f.order}. ${f.name} (${f.era})`;
        select.appendChild(opt);
    });

    select.addEventListener('change', (e) => {
        if (!e.target.value) return;
        const [order, era] = e.target.value.split('|');
        const selected = fetihler.find(f => f.order == order && f.era == era);
        if(selected) updateInfo(selected);
    });

    document.querySelectorAll('.era-filter').forEach(cb => {
        cb.addEventListener('change', renderMarkers);
    });

    renderMarkers();
</script>
</body>
</html>
